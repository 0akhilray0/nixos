# #######################################################################################
# HYPRLAND CONFIGURATION - FULL SETUP
# #######################################################################################
# Desktop Environment : Hyprland (Modern Wayland Compositor)
# User                : akhil
# System              : NixOS 25.11
#
# Documentation: [https://wiki.hyprland.org/Configuring/](https://wiki.hyprland.org/Configuring/)
# Last Updated: 2026-01-04
#
# HOW TO RELOAD:
#   Press Super + Shift + Q (reload script bound)
#
# HOW TO DEBUG:
#   hyprctl clients           (list open windows)
#   hyprctl workspaces        (list workspaces)
#   hyprctl devices           (list input devices)
# #######################################################################################


#############################################
### ANIMATION CONTROL (MASTER CONTROLS)
#############################################

# MASTER ANIMATION TOGGLE
# Set to "yes" to enable all animations, "no" to disable all at once
# Change this single value to control all animations globally
$animations_enabled = yes


#############################################
### WORKSPACE ANIMATION TYPE SELECTOR
#############################################
# Choose your preferred workspace animation style
# Uncomment ONE line below and comment out the others
# - slide: Horizontal sliding transition (classic Hyprland look)
# - slidevert: Vertical sliding transition (best for rotated/tablet displays)
# - fade: Fade in/out transition (smooth and minimal)
# - custom: Advanced combination effect (requires manual tuning)

# Workspace animation type: Horizontal Slide
# $workspace_anim = slide
#
# Workspace animation type: Vertical Slide ✓ RECOMMENDED FOR YOUR SETUP
$workspace_anim = slidevert
#
# Workspace animation type: Fade
# $workspace_anim = fade
#
# Workspace animation type: Custom (fade + slide combination)
# $workspace_anim = slidevert 90

# HOW TO CHANGE WORKSPACE ANIMATION:
# 1. Comment out the active $workspace_anim line (add # before it)
# 2. Uncomment your preferred animation type (remove # from the line)
# 3. Reload config with Super+Shift+Q


#############################################
### ANIMATION SPEED PRESETS
#############################################
# Choose your preferred speed by uncommenting ONE section below:
# - Fast speed is snappy and responsive (good for low-end hardware)
# - Normal speed is balanced and smooth (recommended default)
# - Slow speed is elegant and cinematic (high-end hardware)

# Fast preset (snappy, 2x faster)
 $anim_speed_windows = 2.5
 $anim_speed_fade = 1.0
 $anim_speed_border = 3.0
 $anim_speed_workspace = 1.5
 $anim_speed_layers = 2.0
#
# Normal preset (balanced, default)
# $anim_speed_windows = 4.5
# $anim_speed_fade = 2.5
# $anim_speed_border = 5.0
# $anim_speed_workspace = 3.0
# $anim_speed_layers = 3.5
#
# Slow preset (elegant, cinematic) ✓ ACTIVE
#$anim_speed_windows = 6.5
#$anim_speed_fade = 4.0
#$anim_speed_border = 7.0
#$anim_speed_workspace = 5.0
#$anim_speed_layers = 5.0
#
# HOW TO CHANGE ANIMATION SPEED:
# 1. Comment out the "Slow preset" section (add # before each line)
# 2. Uncomment your preferred preset (remove # from each line)
# 3. Reload config with Super+Shift+Q


#############################################
### ENVIRONMENT VARIABLES & SETTINGS
#############################################

# Qt theming and platform settings
# qt6ct = Qt6 Configuration Tool for theming Qt applications
env = QT_QPA_PLATFORMTHEME,qt6ct
env = QT_STYLE_OVERRIDE,adwaita-dark

# Editor and terminal preferences
# These set the default editor and terminal for the system
env = EDITOR,nvim
env = VISUAL,nvim
env = TERMINAL,ghostty

# Cursor settings
# Controls cursor size in both X11 and Hyprland
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24


#############################################
### MONITOR CONFIGURATION
#############################################

# Primary monitor: DSI-1 (likely tablet/mobile display)
# Syntax: monitor = NAME, RESOLUTION, POSITION, SCALE, transform=ROTATION
# Transform values: 0=normal, 1=90°, 2=180°, 3=270°
# Resolution: 800x1280 at position 0x0 (top-left)
# Transform: 3 (270° rotation - landscape mode)
monitor = DSI-1,800x1280,0x0,1,transform,3

# Secondary monitor configuration (if needed)
# Uncomment and adjust as needed for multi-monitor setup
# Example: HDMI monitor at 1920x1080, 100Hz refresh rate, at position 0x0
# monitor = HDMI-A-1,1920x1080@100,0x0,1


#############################################
### DEFAULT APPLICATIONS
#############################################

# Define default applications using variables for easy changes
# Change these values to use different applications
$terminal = ghostty                         # Terminal emulator
$fileManager = dbus-run-session thunar      # File manager (with dbus for proper mounting)
$menu = rofi -show drun -show-icons        # Application launcher with icons
$browser = firefox                          # Web browser


#############################################
### AUTOSTART PROGRAMS
#############################################

# Programs that start automatically when Hyprland launches
# exec-once = runs only once at startup, won't restart if closed

# Waybar: Status bar showing workspaces, time, system info
exec-once = waybar 

# Swaync: Notification center daemon (alternative to dunst)
# Handles desktop notifications in Wayland
exec-once = swaync

# Waypaper: Wallpaper manager with automatic restoration
# Restores your last wallpaper on startup
exec-once = waypaper --restore

# DBus environment setup for Hyprland session
# Required for proper communication between applications
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_RUNTIME_DIR DISPLAY

# Polkit authentication agent
# Required for graphical password prompts (e.g., Thunar admin access)
exec-once = systemctl --user start polkit-gnome-authentication-agent-1


#############################################
### APPEARANCE & WINDOW DECORATION
#############################################

general {
    # Window gaps (spacing between windows and screen edges)
    # Measured in pixels
    gaps_in = 5                             # Internal gaps between windows
    gaps_out = 5                            # External gaps from screen edges
    gaps_workspaces = 50                    # Extra workspace gap (visual workspace separation)
    
    # Window borders
    border_size = 2                         # Border thickness in pixels (0 = no border)
    
    # Border colors (RGBA format: rrggbbaa)
    # aa = alpha (transparency): ff = opaque, 00 = transparent
    col.active_border = rgba(330000ff)      # Active window: red (#330000, opaque)
    col.inactive_border = rgba(31313600)    # Inactive window: dark gray, transparent
    
    # Window behavior options
    resize_on_border = true                 # Allow resizing by dragging window borders
    no_focus_fallback = true                # Don't auto-focus windows when closing active
    
    # Layout selection
    # Options: dwindle (default), master
    layout = dwindle                        # Window tiling layout algorithm
    
    # Gaming optimization
    allow_tearing = true                    # Enable tearing for lower latency (better for gaming)
}

decoration {
    # Window corner rounding
    # 0 = sharp corners, higher = more rounded (10-15 recommended for rounded look)
    rounding = 0
    
    # Window opacity/transparency
    # 1.0 = fully opaque, 0.0 = fully transparent
    active_opacity = 1.0                    # Active window opacity
    inactive_opacity = 0.8                  # Inactive window opacity (20% transparent)
    fullscreen_opacity = 1.0                # Fullscreen window opacity (always opaque)

    # Blur effect (background blur for transparent windows)
    blur {
        enabled = true                      # Enable blur effect
        size = 6                            # Blur radius in pixels (higher = more blur)
        passes = 2                          # Number of blur passes (1-4, more = stronger + slower)
        new_optimizations = on              # Use optimized blur algorithm (better performance)
        ignore_opacity = true               # Blur regardless of window opacity
        xray = true                         # See through blur to windows behind
        # blurls = waybar                   # Blur specific layers (uncomment to blur waybar)
    }

    # Window shadows
    shadow {
        enabled = false                     # Shadow toggle (disabled for clean look)
        range = 10                          # Shadow size/spread in pixels
        render_power = 1                    # Shadow darkness (1-4, higher = darker)
        color = 0x66000000                  # Shadow color (ARGB: 66=40% opacity, black)
    }
}


#############################################
### ANIMATIONS (POWERED BY MASTER CONTROLS)
#############################################

animations {
    # Master animation toggle
    # Controlled by $animations_enabled variable at top of config
    # Change $animations_enabled to "no" to disable all animations at once
    enabled = $animations_enabled

    # Bezier curve definitions (easing functions)
    # These control how animations accelerate and decelerate
    # Syntax: bezier = NAME, X1, Y1, X2, Y2
    # See: [https://cubic-bezier.com](https://cubic-bezier.com) for visualization
    bezier = easeOutQuint,0.23,1,0.32,1         # Smooth deceleration
    bezier = easeInOutCubic,0.65,0.05,0.36,1   # Smooth acceleration + deceleration
    bezier = linear,0,0,1,1                     # No easing (constant speed)
    bezier = almostLinear,0.5,0.5,0.75,1.0     # Nearly linear with slight easing
    bezier = quick,0.15,0,0.1,1                 # Fast acceleration

    # =====================================
    # ANIMATION DEFINITIONS
    # =====================================
    # Syntax: animation = TYPE, ONOFF, SPEED, CURVE, [STYLE]
    # - TYPE: what to animate (windows, fade, border, etc.)
    # - ONOFF: 1 = on, 0 = off
    # - SPEED: duration in deciseconds (10 = 1 second)
    # - CURVE: bezier curve name (defined above)
    # - STYLE: optional (popin, slide, etc.)
    
    # Window animations (opening, closing, moving)
    animation = windows, 1, $anim_speed_windows, easeOutQuint       # General window animation
    animation = windowsIn, 1, $anim_speed_windows, easeOutQuint, popin 87%  # Window open (pop-in effect)
    animation = windowsOut, 1, 2, linear, popin 87%                 # Window close (pop-out, fast)
    animation = windowsMove, 1, $anim_speed_windows, easeOutQuint   # Window movement between positions
    
    # Border animations (active border color transitions)
    animation = border, 1, $anim_speed_border, easeOutQuint         # Border color fade
    animation = borderangle, 1, 30, linear, loop                    # Animated border gradient rotation
    
    # Fade animations (opacity transitions)
    animation = fadeIn, 1, $anim_speed_fade, almostLinear           # Fade in when appearing
    animation = fadeOut, 1, $anim_speed_fade, almostLinear          # Fade out when disappearing
    animation = fade, 1, $anim_speed_fade, quick                    # General fade effect
    
    # Layer animations (UI elements: menus, panels, notifications)
    animation = layers, 1, $anim_speed_layers, easeOutQuint         # Layer transitions
    animation = layersIn, 1, $anim_speed_layers, easeOutQuint, fade # Layers appearing
    animation = layersOut, 1, 2, linear, fade                       # Layers disappearing (fast)
    
    # Workspace animations (switching between workspaces)
    # Controlled by $workspace_anim variable at top of config
    # Change $workspace_anim to: slide, slidevert, fade, or custom
    animation = workspaces, 1, $anim_speed_workspace, easeInOutCubic, $workspace_anim
    
    # Special workspace animation (scratchpad)
    animation = specialWorkspace, 1, $anim_speed_workspace, almostLinear, slidevert  # Scratchpad slide
}


#############################################
### LAYOUT CONFIGURATION
#############################################

# Dwindle layout: Automatic tiling with master/stack arrangement
# This is the default Hyprland layout algorithm
dwindle {
    pseudotile = true                       # Enable pseudotiling (Super+P to toggle per-window)
                                           # Pseudotiling = floating-like size in tiled mode
    preserve_split = true                   # Remember split direction when moving windows
}

# Master layout: Traditional master-stack layout
# Alternative to dwindle (change general.layout to use)
master {
    new_status = master                     # New windows become master by default
}

# Miscellaneous settings
misc {
    force_default_wallpaper = 0             # Don't force default Hyprland anime wallpaper
    disable_hyprland_logo = true            # Disable Hyprland logo on empty workspaces
}


#############################################
### INPUT CONFIGURATION
#############################################

input {
    # Keyboard layout configuration
    # kb_layout: keyboard layout (us, gb, de, etc.)
    # kb_variant: layout variant (dvorak, colemak, etc.)
    # kb_model: keyboard model (pc104, pc105, etc.)
    # kb_options: additional options (caps:escape, etc.)
    # kb_rules: rules file (leave empty for default)
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    # Mouse behavior
    follow_mouse = 1                        # 0 = disabled, 1 = window focus follows mouse
                                           # 2 = focus follows mouse, but doesn't change on click
    sensitivity = 0                         # Mouse sensitivity adjustment (-1.0 to 1.0, 0 = no change)

    # Touchpad settings
    touchpad {
        natural_scroll = false              # Natural scrolling (macOS-style)
                                           # false = traditional scroll, true = inverted/natural
    }
}

# Per-device input configuration
# Override settings for specific input devices
# Find device names with: hyprctl devices
device {
    name = epic-mouse-v1
    sensitivity = -0.5                      # This mouse gets reduced sensitivity
}


#############################################
### KEYBINDINGS - SUPER KEY (WINDOWS KEY)
#############################################

$mainMod = SUPER                            # Main modifier key (Windows/Command key)

# ===== Application Launching =====
bind = $mainMod, return, exec, $terminal
bind = $mainMod, B, exec, $browser
bind = $mainMod, E, exec, $fileManager
bind = Control, 65, exec, $menu            # Ctrl+A opens application launcher

# ===== Window Management =====
bind = $mainMod, Q, killactive,            # Close active window
bind = $mainMod, F, fullscreen,            # Toggle fullscreen
bind = $mainMod, V, togglefloating         # Toggle floating/tiled mode
bind = $mainMod, T, togglefloating         # Toggle active window floating
bind = $mainMod, P, pseudo,                # Toggle pseudotile (dwindle layout)

# ===== System Control =====
bind = $mainMod, M, exec, systemctl poweroff  # Shutdown system
bind = $mainMod SHIFT, X, exec, loginctl terminate-user akhil   # Shutdown system
# ===== Workspace Navigation =====
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# ===== Window Movement Between Workspaces =====
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# ===== Special Workspace (Scratchpad) =====
bind = $mainMod, S, togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# ===== Workspace Scrolling =====
bind = $mainMod, mouse_down, workspace, e+1  # Scroll up for next workspace
bind = $mainMod, mouse_up, workspace, e-1    # Scroll down for previous workspace


#############################################
### KEYBINDINGS - WINDOW NAVIGATION
#############################################

# Move window focus (vim-style: h/j/k/l)
bind = $mainMod, h, movefocus, l           # Focus left
bind = $mainMod, l, movefocus, r           # Focus right
bind = $mainMod, k, movefocus, u           # Focus up
bind = $mainMod, j, movefocus, d           # Focus down


#############################################
### KEYBINDINGS - WINDOW RESIZING
#############################################

# Resize active window (Shift + vim keys)
bind = $mainMod SHIFT, l, resizeactive, 100 0   # Increase width
bind = $mainMod SHIFT, h, resizeactive, -100 0  # Decrease width
bind = $mainMod SHIFT, j, resizeactive, 0 100   # Increase height
bind = $mainMod SHIFT, k, resizeactive, 0 -100  # Decrease height

# Split manipulation (dwindle layout)
bind = Control SHIFT, O, togglesplit,           # Toggle split direction
bind = Control SHIFT, K, swapsplit              # Swap split direction


#############################################
### KEYBINDINGS - TOGGLE & SPECIAL
#############################################

# Toggle floating for all windows
bind = $mainMod SHIFT, T, exec, /home/akhil/.config/hypr/scripts/togalall.sh

# Reload Hyprland configuration
bind = $mainMod SHIFT, Q, exec, /home/akhil/.config/waybar/scripts/reload.sh



#############################################
### KEYBINDINGS - BRIGHTNESS & VOLUME
#############################################

# Brightness control (XF86 keys)
bindel = , XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = , XF86MonBrightnessDown, exec, brightnessctl s 10%-

# Alternative brightness control (Lenovo laptop)
bind = SUPER, EQUAL, exec, brightnessctl set +5%
bind = SUPER, MINUS, exec, brightnessctl set 5%-

# Volume control (XF86 keys)
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Media controls (requires playerctl)
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous


#############################################
### MOUSE BINDINGS
#############################################

# Move window: Super+LMB drag
bindm = $mainMod, mouse:272, movewindow

# Resize window: Super+RMB drag
bindm = $mainMod, mouse:273, resizewindow


#############################################
### WINDOW RULES
#############################################

# Prevent maximize requests from applications
windowrulev2 = suppressevent maximize, class:.*

# Fix XWayland dragging issues
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0


#############################################
### ADVANCED SETTINGS
#############################################

# Aquamarine (alternative renderer) - disabled
# disable_aquamarine = true


# #######################################################################################
# END OF HYPRLAND CONFIGURATION
# #######################################################################################
#
# ✅ QUICK REFERENCE:
#
# Reload config:     Super+Shift+Q
# Open terminal:     Super+Return
# Open launcher:     Ctrl+A
# Toggle float:      Super+V
# Kill window:       Super+Q
# Fullscreen:        Super+F
#
# ✅ WORKSPACE HOTKEYS:
#
# Switch workspace:  Super+[1-9,0]
# Move window:       Super+Shift+[1-9,0]
#
# ✅ ANIMATION CONTROL:
#
# WORKSPACE ANIMATION TYPE:
#   Edit $workspace_anim variable (line 24-35)
#   - Set to "slide" for horizontal sliding
#   - Set to "slidevert" for vertical sliding (recommended for your setup)
#   - Set to "fade" for fade in/out
#   - Reload config to apply changes
#
# ANIMATION SPEED:
#   Edit animation speed presets (lines 39-55)
#   - Uncomment your preferred preset (Fast/Normal/Slow)
#   - Comment out other presets
#   - Reload config to apply changes
#
# TOGGLE ALL ANIMATIONS:
#   Change $animations_enabled to "yes" or "no" (line 18)
#
# ✅ DEBUG COMMANDS:
#
# List windows:      hyprctl clients
# List workspaces:   hyprctl workspaces
# List devices:      hyprctl devices
# Monitor logs:      tail -f ~/.cache/hyprland/hyprland.log
#
# ✅ ANIMATION TYPES REFERENCE:
#
# - slide:       Horizontal sliding (classic Hyprland look)
# - slidevert:   Vertical sliding (best for rotated displays)
# - fade:        Fade in/out (minimal, elegant)
# - slidevert 90: Vertical slide with custom angle
#
# #######################################################################